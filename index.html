<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>初音ミク — Hatsune Miku</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --cyan:#39c5bb;--cyan-glow:rgba(57,197,187,0.4);
      --pink:#ff4081;--purple:#7c4dff;--dark:#0a0a1a;--darker:#050510;
      --text:#e0f7fa;--text-dim:rgba(224,247,250,0.5);
    }
    html{scroll-behavior:smooth}
    body{font-family:'Rajdhani',sans-serif;background:var(--dark);color:var(--text);overflow-x:hidden;
      cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20'%3E%3Cpath d='M3 1L17 10L10 11L13 18L10 19L7 12L3 16Z' fill='%2339c5bb' stroke='%23050510' stroke-width='1'/%3E%3C/svg%3E") 3 1, auto}

    .scanlines{position:fixed;inset:0;z-index:9990;pointer-events:none;
      background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.03) 2px,rgba(0,0,0,0.03) 4px)}

    /* Click-to-start overlay */
    .start-screen{position:fixed;inset:0;z-index:10002;display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:radial-gradient(ellipse at center,#080818 0%,#020205 100%);cursor:pointer;transition:opacity .5s;overflow:hidden}
    .start-screen.hidden{opacity:0;pointer-events:none}
    .start-screen::before{content:'';position:absolute;inset:0;
      background:radial-gradient(2px 2px at 30px 40px,rgba(57,197,187,0.3),transparent),
      radial-gradient(1px 1px at 80px 120px,rgba(255,64,129,0.2),transparent);
      background-size:200px 200px,180px 180px;animation:starDrift 120s linear infinite}
    .start-prompt{font-family:'Orbitron',monospace;font-size:.65rem;color:var(--cyan);letter-spacing:.4em;text-transform:uppercase;
      animation:promptPulse 2s ease-in-out infinite;text-shadow:0 0 20px var(--cyan-glow)}
    .start-title{font-family:'Orbitron',monospace;font-size:1.8rem;font-weight:900;color:#fff;letter-spacing:.1em;margin-bottom:30px;
      text-shadow:0 0 30px var(--cyan-glow)}
    .start-ring{width:80px;height:80px;border:2px solid rgba(57,197,187,0.3);border-top-color:var(--cyan);border-radius:50%;
      animation:spin 3s linear infinite;margin-bottom:30px}
    @keyframes promptPulse{0%,100%{opacity:0.5}50%{opacity:1}}

    .loader{position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:#000;transition:opacity .6s ease,visibility .6s ease;
      perspective:1000px;overflow:hidden}
    .skip-btn{position:fixed;z-index:10001;bottom:28px;right:28px;font-family:'Orbitron',monospace;
      font-size:.65rem;color:rgba(57,197,187,0.5);letter-spacing:.1em;cursor:pointer;
      background:none;border:1px solid rgba(57,197,187,0.2);padding:8px 18px;border-radius:3px;
      opacity:0;pointer-events:none;transition:opacity .6s ease}
    .skip-btn.show{opacity:1;pointer-events:auto}
    .skip-btn:hover{color:var(--cyan);border-color:rgba(57,197,187,0.5)}
    .loader.hidden{opacity:0;visibility:hidden;pointer-events:none}
    .loader.blackout{background:#000!important}
    .loader.blackout *:not(.flash-overlay){opacity:0!important;visibility:hidden!important}

    /* Animated starfield */
    .loader-stars{position:absolute;inset:0;
      background:radial-gradient(2px 2px at 20px 30px,rgba(57,197,187,0.4),transparent),
      radial-gradient(1px 1px at 50px 100px,rgba(255,64,129,0.3),transparent),
      radial-gradient(2px 2px at 80px 50px,rgba(124,77,255,0.3),transparent),
      radial-gradient(1px 1px at 120px 80px,rgba(57,197,187,0.25),transparent),
      radial-gradient(1.5px 1.5px at 180px 150px,rgba(255,64,129,0.2),transparent);
      background-size:200px 200px,150px 150px,180px 180px,250px 250px,220px 220px;
      animation:starDrift 120s linear infinite}
    @keyframes starDrift{to{background-position:200px 200px,-150px 150px,180px -180px,-250px 250px,220px -220px}}

    /* Hex grid overlay */
    .loader-hex{position:absolute;inset:0;opacity:0.04;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='100'%3E%3Cpath d='M28 66L0 50L0 16L28 0L56 16L56 50L28 66L28 100' fill='none' stroke='%2339c5bb' stroke-width='0.5'/%3E%3Cpath d='M28 0L28 34L0 50L0 84L28 100L56 84L56 50L28 34' fill='none' stroke='%2339c5bb' stroke-width='0.5'/%3E%3C/svg%3E");
      background-size:56px 100px;animation:hexPulse 4s ease-in-out infinite}
    @keyframes hexPulse{0%,100%{opacity:0.03}50%{opacity:0.07}}

    /* Holographic rings */
    .loader-rings{position:absolute;width:340px;height:340px;pointer-events:none}
    .load-ring{position:absolute;inset:0;border-radius:50%;border:1px solid rgba(57,197,187,0.3);animation:spin 8s linear infinite}
    .load-ring:nth-child(2){inset:25px;border-color:rgba(255,64,129,0.2);animation-duration:12s;animation-direction:reverse}
    .load-ring:nth-child(3){inset:50px;border-color:rgba(124,77,255,0.15);animation-duration:15s}
    .load-ring:nth-child(4){inset:-15px;border-style:dashed;border-color:rgba(57,197,187,0.15);animation-duration:20s}
    .load-ring:nth-child(5){inset:-40px;border-color:rgba(57,197,187,0.08);animation-duration:25s;border-style:dotted}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Scan line */
    .scan-line{position:absolute;left:0;right:0;height:2px;
      background:linear-gradient(90deg,transparent,var(--cyan),transparent);
      box-shadow:0 0 15px var(--cyan),0 0 30px rgba(57,197,187,0.2);
      opacity:0.5;animation:scan 2.5s ease-in-out infinite}
    @keyframes scan{0%,100%{top:30%;opacity:0}10%{opacity:0.5}90%{opacity:0.5}100%{top:70%;opacity:0}}

    /* Audio visualizer */
    .audio-viz{display:flex;align-items:flex-end;justify-content:center;gap:3px;height:40px;margin:25px 0;opacity:0;transition:opacity .4s}
    .audio-viz.show{opacity:1}
    .viz-bar{width:4px;background:linear-gradient(180deg,var(--cyan),var(--pink));border-radius:2px;
      box-shadow:0 0 8px var(--cyan-glow);animation:dance .5s ease-in-out infinite alternate}
    .viz-bar:nth-child(odd){animation-duration:.4s;animation-delay:.1s}
    .viz-bar:nth-child(3n){animation-duration:.6s;animation-delay:.2s}
    @keyframes dance{from{height:5px}to{height:35px}}

    /* Progress ring */
    .progress-ring-wrap{position:absolute;width:260px;height:260px;pointer-events:none}
    .progress-ring{transform:rotate(-90deg)}
    .progress-ring-bg{fill:none;stroke:rgba(57,197,187,0.08);stroke-width:2}
    .progress-ring-fill{fill:none;stroke:var(--cyan);stroke-width:2;stroke-linecap:round;
      stroke-dasharray:754;stroke-dashoffset:754;transition:stroke-dashoffset 0.3s ease,stroke .3s;
      filter:drop-shadow(0 0 6px var(--cyan-glow))}
    .progress-ring-fill.error{stroke:var(--pink)}

    /* Futuristic CSS vector overlays */

    /* Large faint kanji background text */
    .vec-kanji-bg{position:absolute;z-index:1;top:50%;left:50%;transform:translate(-50%,-50%);
      font-size:14rem;font-weight:900;color:rgba(57,197,187,0.04);white-space:nowrap;
      pointer-events:none;opacity:0;transition:opacity 2s ease;letter-spacing:.1em;
      text-shadow:0 0 60px rgba(57,197,187,0.02)}
    .vec-kanji-bg.show{opacity:1}
    .vec-kanji-bg.calne{color:rgba(255,23,68,0.06);text-shadow:0 0 60px rgba(255,23,68,0.03);
      animation:kanjiGlitch .1s steps(2) infinite}
    @keyframes kanjiGlitch{
      0%{transform:translate(-50%,-50%)}
      25%{transform:translate(-48%,-52%)}
      50%{transform:translate(-52%,-49%)}
      75%{transform:translate(-50%,-51%)}
      100%{transform:translate(-51%,-50%)}
    }

    /* Cyber HUD frames — sporadic floating panels with corner accents and typed text */
    .cyber-frame{position:absolute;z-index:4;pointer-events:none;opacity:0;transition:opacity .6s ease;
      border:1px solid rgba(57,197,187,0.2);background:rgba(57,197,187,0.02)}
    .cyber-frame.show{opacity:1}
    .cyber-frame.shake{border-color:rgba(255,23,68,0.4);animation:panelShake .15s infinite}
    .cyber-frame.shatter{opacity:0!important;transform:scale(1.3)!important;transition:all .4s ease-in}
    /* Corner accents */
    .cyber-frame .cf-tl,.cyber-frame .cf-tr,.cyber-frame .cf-bl,.cyber-frame .cf-br{
      position:absolute;width:14px;height:14px}
    .cyber-frame .cf-tl::before,.cyber-frame .cf-tl::after,
    .cyber-frame .cf-tr::before,.cyber-frame .cf-tr::after,
    .cyber-frame .cf-bl::before,.cyber-frame .cf-bl::after,
    .cyber-frame .cf-br::before,.cyber-frame .cf-br::after{
      content:'';position:absolute;background:var(--cyan);box-shadow:0 0 6px var(--cyan-glow)}
    .cyber-frame .cf-tl{top:-1px;left:-1px}
    .cyber-frame .cf-tl::before{width:14px;height:1px;top:0;left:0}
    .cyber-frame .cf-tl::after{width:1px;height:14px;top:0;left:0}
    .cyber-frame .cf-tr{top:-1px;right:-1px}
    .cyber-frame .cf-tr::before{width:14px;height:1px;top:0;right:0}
    .cyber-frame .cf-tr::after{width:1px;height:14px;top:0;right:0}
    .cyber-frame .cf-bl{bottom:-1px;left:-1px}
    .cyber-frame .cf-bl::before{width:14px;height:1px;bottom:0;left:0}
    .cyber-frame .cf-bl::after{width:1px;height:14px;bottom:0;left:0}
    .cyber-frame .cf-br{bottom:-1px;right:-1px}
    .cyber-frame .cf-br::before{width:14px;height:1px;bottom:0;right:0}
    .cyber-frame .cf-br::after{width:1px;height:14px;bottom:0;right:0}
    /* Decorative circuit lines extending from frame */
    .cyber-frame::before{content:'';position:absolute;top:-1px;left:30%;width:40%;height:1px;
      background:linear-gradient(90deg,transparent,var(--cyan),transparent);opacity:0.4}
    .cyber-frame::after{content:'';position:absolute;bottom:-1px;left:20%;width:60%;height:1px;
      background:linear-gradient(90deg,transparent,rgba(57,197,187,0.3),transparent);opacity:0.3}
    /* Header bar */
    .cyber-frame .cf-header{position:absolute;top:0;left:14px;right:14px;height:16px;
      border-bottom:1px solid rgba(57,197,187,0.1);display:flex;align-items:center;padding:0 6px}
    .cyber-frame .cf-header .cf-dot{width:4px;height:4px;border-radius:50%;background:var(--cyan);
      box-shadow:0 0 4px var(--cyan-glow);margin-right:4px}
    .cyber-frame .cf-header span{font-family:'Orbitron',monospace;font-size:.35rem;
      color:rgba(57,197,187,0.5);letter-spacing:.1em;text-transform:uppercase}
    /* Typed content */
    .cyber-frame .cf-body{padding:20px 10px 8px;font-family:'Orbitron',monospace;font-size:.4rem;
      color:rgba(57,197,187,0.6);letter-spacing:.06em;line-height:1.7}
    .cyber-frame .cf-line{opacity:0;transition:opacity .3s}
    .cyber-frame .cf-line.show{opacity:1}

    /* Static/glitch effect on frames */
    @keyframes cfStatic{
      0%{opacity:1;transform:none}
      3%{opacity:0.4;transform:translate(2px,-1px)}
      6%{opacity:1;transform:none}
      45%{opacity:1}
      47%{opacity:0.2;transform:skewX(1deg)}
      49%{opacity:0.9;transform:none}
      80%{opacity:1}
      82%{opacity:0.3;transform:translate(-1px,1px)}
      84%{opacity:1;transform:none}
    }
    .cyber-frame.static{animation:cfStatic 3s infinite}
    .cyber-frame.static-slow{animation:cfStatic 5s infinite}
    .cyber-frame.static-fast{animation:cfStatic 1.8s infinite}

    /* Individual frame positions & sizes */
    #cf1{top:8%;left:4%;width:190px;height:110px}
    #cf2{top:6%;right:3%;width:200px;height:100px}
    #cf3{bottom:18%;left:5%;width:180px;height:105px}
    #cf4{bottom:15%;right:4%;width:195px;height:110px}
    #cf5{top:40%;left:2%;width:170px;height:95px}
    #cf6{top:35%;right:2%;width:185px;height:100px}
    /* New frames — varied sizes */
    #cf7{top:3%;left:28%;width:130px;height:70px}
    #cf8{top:14%;right:18%;width:240px;height:80px}
    #cf9{bottom:8%;left:22%;width:150px;height:85px}
    #cf10{bottom:5%;right:20%;width:110px;height:65px}
    #cf11{top:55%;left:8%;width:220px;height:75px}
    #cf12{top:22%;right:8%;width:140px;height:90px}

    .loader-center{position:relative;z-index:5;text-align:center}
    .loader-init{font-family:'Orbitron',monospace;font-size:.7rem;color:var(--cyan);letter-spacing:.3em;text-transform:uppercase;
      margin-bottom:24px;opacity:0;transition:opacity .4s}
    .loader-init.show{opacity:1}
    .loader-title{font-family:'Orbitron',monospace;font-size:3rem;font-weight:900;color:#fff;letter-spacing:.08em;
      text-shadow:0 0 30px var(--cyan-glow),0 0 60px rgba(57,197,187,0.2);
      opacity:0;transition:opacity .3s}
    .loader-title.show{opacity:1}
    .loader-jp{font-family:'Rajdhani',sans-serif;font-size:1rem;color:var(--cyan);letter-spacing:.25em;margin-top:4px;
      opacity:0;transition:opacity .4s;text-shadow:0 0 15px var(--cyan-glow)}
    .loader-jp.show{opacity:1}
    .loader-sub{font-size:.75rem;color:var(--text-dim);letter-spacing:.15em;text-transform:uppercase;margin-top:8px;
      opacity:0;transition:opacity .4s}
    .loader-sub.show{opacity:1}

    /* Boot terminal */
    .boot-terminal{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);width:400px;max-width:90vw;
      font-family:'Orbitron',monospace;font-size:.55rem;color:var(--cyan);letter-spacing:.06em;line-height:1.8;
      opacity:0;transition:opacity .4s;z-index:5}
    .boot-terminal.show{opacity:1}
    .boot-line{opacity:0;transition:opacity .2s}
    .boot-line.show{opacity:1}
    .boot-line.error{color:#ff1744}
    .boot-line .ok{color:#00e676}
    .boot-line .warn{color:#ffab00}
    .boot-line .fail{color:#ff1744}

    /* Holographic floating panels */
    .holo-panel{position:absolute;background:rgba(57,197,187,0.04);border:1px solid rgba(57,197,187,0.2);
      border-radius:4px;padding:12px 16px;backdrop-filter:blur(2px);
      font-family:'Orbitron',monospace;font-size:.5rem;color:rgba(57,197,187,0.6);letter-spacing:.08em;
      opacity:0;transition:opacity .6s,transform .6s,border-color .3s,box-shadow .3s;z-index:4;
      overflow:hidden}
    .holo-panel.show{opacity:1}
    .holo-panel.shake{animation:panelShake .15s infinite;border-color:rgba(255,23,68,0.5);
      box-shadow:0 0 20px rgba(255,23,68,0.2)}
    .holo-panel.shatter{opacity:0!important;transform:scale(1.5) rotate(10deg)!important;transition:all .4s ease-in}
    .holo-panel::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;
      background:linear-gradient(90deg,transparent,rgba(57,197,187,0.4),transparent)}
    .holo-panel .holo-label{color:rgba(57,197,187,0.4);font-size:.4rem;text-transform:uppercase;margin-bottom:6px;letter-spacing:.15em}
    .holo-panel .holo-value{color:var(--cyan);font-size:.65rem}
    .holo-panel .holo-wave{display:flex;align-items:center;gap:1px;height:20px;margin-top:4px}
    .holo-panel .holo-wave span{display:block;width:2px;background:var(--cyan);border-radius:1px;
      animation:waveBar .6s ease-in-out infinite alternate}
    .holo-panel .holo-wave span:nth-child(odd){animation-delay:.1s;animation-duration:.5s}
    .holo-panel .holo-wave span:nth-child(3n){animation-delay:.2s;animation-duration:.7s}
    @keyframes waveBar{from{height:3px}to{height:18px}}

    .holo-panel:nth-child(1){top:12%;left:6%;transform:perspective(800px) rotateY(15deg) rotateX(-3deg);width:160px}
    .holo-panel:nth-child(2){top:18%;right:5%;transform:perspective(800px) rotateY(-12deg) rotateX(2deg);width:180px}
    .holo-panel:nth-child(3){bottom:22%;left:8%;transform:perspective(800px) rotateY(10deg) rotateX(5deg);width:150px}
    .holo-panel:nth-child(4){bottom:28%;right:7%;transform:perspective(800px) rotateY(-18deg) rotateX(-4deg);width:170px}
    .holo-panel:nth-child(5){top:45%;left:3%;transform:perspective(800px) rotateY(20deg) rotateX(2deg);width:140px}

    @keyframes panelShake{
      0%{transform:translate(0,0)}25%{transform:translate(-4px,2px)}
      50%{transform:translate(3px,-3px)}75%{transform:translate(-2px,4px)}100%{transform:translate(2px,-1px)}
    }
    @keyframes panelFloat{
      0%,100%{transform:var(--panel-transform) translateY(0)}
      50%{transform:var(--panel-transform) translateY(-8px)}
    }

    /* Corner HUD */
    .hud-corner{position:absolute;font-family:'Orbitron',monospace;font-size:.45rem;color:rgba(57,197,187,0.3);
      letter-spacing:.1em;opacity:0;transition:opacity .4s;z-index:5}
    .hud-corner.show{opacity:1}
    .hud-corner.tl{top:20px;left:20px}
    .hud-corner.tr{top:20px;right:20px;text-align:right}
    .hud-corner.bl{bottom:20px;left:20px}
    .hud-corner.br{bottom:20px;right:20px;text-align:right}

    /* Spark canvas */
    .spark-canvas{position:fixed;inset:0;z-index:10000;pointer-events:none}

    /* Flash overlay */
    .flash-overlay{position:fixed;inset:0;z-index:10001;pointer-events:none;opacity:0;
      background:#fff;transition:opacity .05s}
    .flash-overlay.bang{opacity:1}
    .flash-overlay.fade{transition:opacity 2.5s ease-out;opacity:0}

    /* Hero shake */
    .hero.shake{animation:heroShake .4s ease-out}
    @keyframes heroShake{
      0%{transform:translate(0,0)}10%{transform:translate(-6px,4px)}
      20%{transform:translate(5px,-3px)}30%{transform:translate(-4px,5px)}
      40%{transform:translate(3px,-2px)}50%{transform:translate(-2px,3px)}
      60%{transform:translate(2px,-1px)}100%{transform:translate(0,0)}
    }

    /* Subliminal glitch image */
    .glitch-image{position:absolute;inset:0;z-index:8;pointer-events:none;opacity:0;
      background:url('https://i.pinimg.com/736x/1c/d6/3b/1cd63ba926e267af219b70ec456a08f5.jpg') center/cover no-repeat;
      mix-blend-mode:screen;filter:contrast(1.6) brightness(0.4) saturate(0.3) hue-rotate(160deg)}
    .glitch-image.flash1{opacity:0.9;animation:subliminalFlash .25s steps(2) forwards;
      filter:contrast(1.4) brightness(0.6) saturate(0.4) hue-rotate(160deg)}
    .glitch-image.flash2{opacity:1;animation:subliminalFlash2 .3s steps(3) forwards;
      filter:contrast(1.5) brightness(0.7) saturate(0.35) hue-rotate(170deg);mix-blend-mode:normal}
    .glitch-image.flash3{opacity:1;animation:subliminalHold .5s ease-out forwards;
      filter:contrast(1.3) brightness(0.8) saturate(0.4) hue-rotate(160deg);mix-blend-mode:normal}
    @keyframes subliminalFlash{
      0%{opacity:0;clip-path:inset(10% 0 30% 0)}
      40%{opacity:0.95;clip-path:inset(0)}
      100%{opacity:0;clip-path:inset(40% 0 10% 0)}
    }
    @keyframes subliminalFlash2{
      0%{opacity:0;clip-path:inset(0)}
      30%{opacity:1;clip-path:inset(0)}
      60%{opacity:0.8;clip-path:inset(5% 0 5% 0)}
      100%{opacity:0;clip-path:inset(0)}
    }
    @keyframes subliminalHold{
      0%{opacity:0.9;transform:scale(1.02)}
      20%{opacity:1;transform:scale(1)}
      70%{opacity:0.9;transform:scale(1)}
      100%{opacity:0;transform:scale(1.03)}
    }

    /* Glitch state for error phase — applied to inner wrapper, not the loader itself */
    .loader-glitch-wrap{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .loader.glitching .loader-glitch-wrap{animation:loaderGlitch .1s infinite}
    .loader.glitching .loader-title{animation:chromaPulse .15s infinite}
    @keyframes loaderGlitch{
      0%{clip-path:inset(0)}
      20%{clip-path:inset(15% 0 60% 0);transform:translate(-3px)}
      40%{clip-path:inset(50% 0 20% 0);transform:translate(4px)}
      60%{clip-path:inset(30% 0 40% 0);transform:translate(-2px)}
      80%{clip-path:inset(70% 0 5% 0);transform:translate(3px)}
      100%{clip-path:inset(0);transform:translate(0)}
    }
    @keyframes chromaPulse{
      0%{text-shadow:3px 0 var(--pink),-3px 0 var(--cyan)}
      33%{text-shadow:-3px 0 var(--pink),3px 0 #7c4dff}
      66%{text-shadow:2px 2px var(--pink),-2px -2px var(--cyan)}
      100%{text-shadow:-2px 0 #ff1744,2px 0 var(--cyan)}
    }

    @keyframes flicker{0%{opacity:0}100%{opacity:1}}
    @keyframes fadeIn{to{opacity:1}}
    @keyframes barFill{to{width:100%}}
    @keyframes glitchIn{
      0%{opacity:0;transform:translate(0)}
      10%{opacity:1;transform:translate(-3px,2px);text-shadow:2px 0 var(--pink),-2px 0 var(--cyan)}
      20%{transform:translate(3px,-1px);text-shadow:-2px 0 var(--pink),2px 0 var(--cyan)}
      30%{transform:translate(-1px,3px)}
      40%{transform:translate(2px,-2px);text-shadow:1px 0 var(--pink),-1px 0 var(--cyan)}
      50%,100%{opacity:1;transform:translate(0);text-shadow:0 0 30px var(--cyan-glow),0 0 60px rgba(57,197,187,0.2)}
    }

    #threeCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}

    .site-header{position:fixed;top:0;left:0;right:0;z-index:60;padding:20px 48px;display:flex;justify-content:space-between;
      align-items:center;transition:background .5s,backdrop-filter .5s}
    .site-header.scrolled{background:rgba(10,10,26,0.92);backdrop-filter:blur(12px);border-bottom:1px solid rgba(57,197,187,0.1)}
    .logo{font-family:'Orbitron',monospace;font-size:1.1rem;color:var(--cyan);text-decoration:none;letter-spacing:.1em;
      text-shadow:0 0 10px var(--cyan-glow)}
    .logo span{color:var(--pink)}
    .nav-links{display:flex;gap:28px;align-items:center}
    .nav-links a{color:var(--text-dim);text-decoration:none;font-size:.75rem;letter-spacing:.1em;text-transform:uppercase;
      font-family:'Orbitron',monospace;transition:color .3s,text-shadow .3s}
    .nav-links a:hover{color:var(--cyan);text-shadow:0 0 10px var(--cyan-glow)}

    .glitch{position:relative}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;top:0;left:0;width:100%;height:100%;opacity:0}
    .glitch:hover::before{opacity:.8;color:var(--pink);animation:glitchClip 0.3s infinite alternate-reverse;clip-path:inset(20% 0 30% 0)}
    .glitch:hover::after{opacity:.8;color:var(--cyan);animation:glitchClip 0.3s 0.1s infinite alternate;clip-path:inset(50% 0 10% 0)}
    @keyframes glitchClip{
      0%{clip-path:inset(20% 0 60% 0);transform:translate(-2px)}
      25%{clip-path:inset(50% 0 10% 0);transform:translate(2px)}
      50%{clip-path:inset(10% 0 40% 0);transform:translate(-1px)}
      75%{clip-path:inset(60% 0 5% 0);transform:translate(1px)}
      100%{clip-path:inset(30% 0 30% 0);transform:translate(0)}
    }

    /* Hero */
    .hero{position:relative;height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .hero-model{position:absolute;inset:0;z-index:1}
    .hero-model iframe{width:100%;height:100%;border:none}
    .hero-overlay{position:absolute;inset:0;z-index:2;
      background:linear-gradient(180deg,rgba(5,5,16,0.3) 0%,rgba(5,5,16,0.1) 40%,rgba(5,5,16,0.7) 100%);pointer-events:none}
    .hero-content{position:relative;z-index:3;text-align:center;pointer-events:none}
    .hero-content h1{font-family:'Orbitron',monospace;font-size:3.5rem;font-weight:900;color:#fff;letter-spacing:.06em;
      text-shadow:0 0 40px var(--cyan-glow),0 0 80px rgba(57,197,187,0.15);
      opacity:0;transition:opacity 1s ease,transform 1s ease}
    .hero-content h1.reveal{opacity:1;transform:translateY(0)}
    .hero-content .hero-jp{font-family:'Orbitron',monospace;font-size:1rem;color:var(--cyan);letter-spacing:.3em;margin-bottom:12px;
      opacity:0;transition:opacity .8s ease,transform .8s ease}
    .hero-content .hero-jp.reveal{opacity:1;transform:translateY(0)}
    .hero-content p{font-size:1.1rem;color:var(--text-dim);letter-spacing:.12em;margin-top:16px;font-weight:300;
      opacity:0;transition:opacity .8s ease,transform .8s ease}
    .hero-content p.reveal{opacity:1;transform:translateY(0)}
    .hero-scroll{position:absolute;bottom:40px;left:50%;transform:translateX(-50%);z-index:3;
      color:var(--text-dim);font-size:.65rem;letter-spacing:.2em;text-transform:uppercase;text-decoration:none;
      opacity:0;transition:opacity .8s ease}
    .hero-scroll::after{content:'';display:block;width:1px;height:40px;
      background:linear-gradient(180deg,var(--cyan),transparent);margin:12px auto 0;animation:pulse 2s infinite}
    @keyframes heroSlide{to{opacity:1;transform:translateY(0)}}
    @keyframes pulse{0%,100%{opacity:.3}50%{opacity:1}}

    /* Tracks section — scattered floating */
    .tracks-section{position:relative;z-index:1;min-height:100vh;padding:120px 0 160px;overflow:visible}
    .tracks-section::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;
      background:linear-gradient(90deg,transparent,var(--pink),transparent)}
    .tracks-title{text-align:center;margin-bottom:80px;position:relative;z-index:2}
    .tracks-title h2{font-family:'Orbitron',monospace;font-size:1.6rem;font-weight:700;color:var(--pink);letter-spacing:.15em;
      text-shadow:0 0 20px rgba(255,64,129,0.4)}
    .tracks-title p{color:var(--text-dim);font-size:.85rem;margin-top:8px;letter-spacing:.06em}

    .tracks-scatter{position:relative;max-width:1200px;margin:0 auto;height:900px}

    .disco-card{position:absolute;overflow:hidden;border-radius:8px;border:1px solid rgba(57,197,187,0.12);
      width:220px;cursor:pointer;opacity:0;
      transition:opacity .8s ease,border-color .4s,box-shadow .4s;
      animation:cardFloat 6s ease-in-out infinite}
    .disco-card.visible{opacity:1}
    .disco-card:hover{border-color:var(--cyan);box-shadow:0 0 35px var(--cyan-glow),0 4px 30px rgba(0,0,0,0.4)}
    .disco-card.playing{border-color:var(--pink);box-shadow:0 0 40px rgba(255,64,129,0.35),0 4px 30px rgba(0,0,0,0.4)}

    .disco-card .card-img{position:relative;width:100%;aspect-ratio:3/4;overflow:hidden}
    .disco-card img{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}
    .disco-card:hover img{transform:scale(1.06)}
    .disco-card .static-overlay{position:absolute;inset:0;z-index:2;pointer-events:none;
      background:linear-gradient(180deg,rgba(20,60,80,0.5) 0%,rgba(10,30,50,0.65) 100%);transition:opacity .6s ease}
    .disco-card .static-overlay::before{content:'';position:absolute;inset:0;
      background:repeating-linear-gradient(0deg,transparent,transparent 1px,rgba(57,197,187,0.05) 1px,rgba(57,197,187,0.05) 2px);
      animation:staticScroll 0.4s linear infinite}
    .disco-card .static-overlay::after{content:'';position:absolute;inset:0;
      background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E");
      opacity:.5;animation:staticFlicker 0.15s steps(3) infinite}
    .disco-card.playing .static-overlay{opacity:0}

    .disco-card .play-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.8);z-index:4;
      width:48px;height:48px;border-radius:50%;background:rgba(57,197,187,0.15);border:2px solid var(--cyan);
      display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s,transform .3s;
      box-shadow:0 0 20px var(--cyan-glow);backdrop-filter:blur(4px)}
    .disco-card .play-icon::after{content:'';width:0;height:0;border-style:solid;border-width:7px 0 7px 12px;
      border-color:transparent transparent transparent var(--cyan);margin-left:2px}
    .disco-card:hover .play-icon{opacity:1;transform:translate(-50%,-50%) scale(1)}
    .disco-card.playing .play-icon{opacity:1;border-color:var(--pink);background:rgba(255,64,129,0.15);
      box-shadow:0 0 20px rgba(255,64,129,0.3)}
    .disco-card.playing .play-icon::after{border-width:0;width:10px;height:12px;margin-left:0;
      border-left:3px solid var(--pink);border-right:3px solid var(--pink);background:transparent}

    .disco-card .card-label{padding:14px 14px 16px;background:rgba(5,5,16,0.9)}
    .disco-card .card-label h3{font-family:'Orbitron',monospace;font-size:.72rem;font-weight:700;color:#fff;letter-spacing:.04em;
      margin-bottom:3px;text-shadow:0 0 8px rgba(0,0,0,0.5)}
    .disco-card .card-label .song-artist{font-size:.62rem;color:var(--cyan);letter-spacing:.06em}

    /* Each card positioned uniquely */
    .disco-card:nth-child(1){left:5%;top:0;animation-delay:0s;transform:rotate(-3deg)}
    .disco-card:nth-child(2){right:8%;top:40px;animation-delay:-1.2s;transform:rotate(2deg)}
    .disco-card:nth-child(3){left:35%;top:280px;animation-delay:-2.5s;transform:rotate(-1.5deg)}
    .disco-card:nth-child(4){left:12%;top:520px;animation-delay:-3.8s;transform:rotate(2.5deg)}
    .disco-card:nth-child(5){right:15%;top:460px;animation-delay:-4.5s;transform:rotate(-2deg)}

    @keyframes cardFloat{
      0%,100%{transform:translateY(0) rotate(var(--rot,0deg))}
      50%{transform:translateY(-12px) rotate(var(--rot,0deg))}
    }
    .disco-card:nth-child(1){--rot:-3deg}
    .disco-card:nth-child(2){--rot:2deg}
    .disco-card:nth-child(3){--rot:-1.5deg}
    .disco-card:nth-child(4){--rot:2.5deg}
    .disco-card:nth-child(5){--rot:-2deg}

    /* World is Mine cinema mode */
    .wim-video{position:fixed;inset:0;z-index:85;object-fit:cover;width:100%;height:100%;
      opacity:0;pointer-events:none;transition:opacity 1.2s ease}
    .wim-video.active{opacity:1;pointer-events:auto}
    .wim-overlay{position:fixed;inset:0;z-index:86;background:rgba(0,0,0,0.15);
      opacity:0;pointer-events:none;transition:opacity 1.2s ease}
    .wim-overlay.active{opacity:1;pointer-events:auto}
    .tracks-section.cinema .tracks-title{opacity:0;transition:opacity .6s ease;pointer-events:none}
    .tracks-section.cinema .disco-card:not(.wim-active){
      opacity:0!important;pointer-events:none;transition:opacity .6s ease}
    .disco-card.wim-active{
      position:fixed!important;z-index:88;animation:none!important;
      border-color:var(--pink);box-shadow:0 0 40px rgba(255,64,129,0.4),0 8px 40px rgba(0,0,0,0.6);
      transition:top 1.4s cubic-bezier(0.25,0.8,0.25,1),left 1.4s cubic-bezier(0.25,0.8,0.25,1),
        width 1.4s cubic-bezier(0.25,0.8,0.25,1),transform 1.4s cubic-bezier(0.25,0.8,0.25,1),
        border-color .4s,box-shadow .4s}
    .wim-back{position:fixed;z-index:90;top:24px;left:24px;font-family:'Orbitron',monospace;
      font-size:.75rem;color:var(--cyan);letter-spacing:.12em;cursor:pointer;
      background:rgba(5,5,16,0.85);border:1px solid rgba(57,197,187,0.4);
      padding:10px 22px;border-radius:4px;opacity:0;pointer-events:none;
      transition:opacity .6s ease .8s;backdrop-filter:blur(10px);
      box-shadow:0 0 12px rgba(57,197,187,0.15)}
    .wim-back:hover{background:rgba(57,197,187,0.2);border-color:var(--cyan);
      box-shadow:0 0 20px rgba(57,197,187,0.3)}
    .wim-back.active{opacity:1;pointer-events:auto}
    .wim-overlay.active{cursor:default}

    @keyframes staticScroll{0%{transform:translateY(0)}100%{transform:translateY(4px)}}
    @keyframes staticFlicker{0%{opacity:.5}50%{opacity:.3}100%{opacity:.5}}

    /* Music player */
    .music-player{position:fixed;bottom:0;left:0;right:0;z-index:91;background:rgba(5,5,16,0.95);backdrop-filter:blur(12px);
      border-top:1px solid rgba(57,197,187,0.15);padding:12px 32px;display:flex;align-items:center;gap:20px;
      transform:translateY(100%);transition:transform .5s ease}
    .music-player.visible{transform:translateY(0)}
    .player-btn{background:none;border:2px solid var(--cyan);color:var(--cyan);width:36px;height:36px;border-radius:50%;
      cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
    .player-btn:hover{background:var(--cyan);color:var(--darker)}
    .player-info{flex:1;min-width:0}
    .player-info .track-name{font-family:'Orbitron',monospace;font-size:.72rem;color:#fff;letter-spacing:.08em;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .player-info .track-artist{font-size:.65rem;color:var(--text-dim);letter-spacing:.06em;margin-top:2px}
    .player-progress{flex:2;height:3px;background:rgba(57,197,187,0.15);border-radius:2px;overflow:hidden;cursor:pointer}
    .player-progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--cyan),var(--pink));border-radius:2px;
      transition:width .1s linear}
    .player-time{font-family:'Orbitron',monospace;font-size:.6rem;color:var(--text-dim);letter-spacing:.06em;flex-shrink:0}
    .player-vol{display:flex;align-items:center;gap:8px;flex-shrink:0}
    .player-vol-icon{color:var(--text-dim);font-size:.8rem}
    .player-vol-bar{width:60px;height:3px;background:rgba(57,197,187,0.15);border-radius:2px;overflow:hidden;cursor:pointer}
    .player-vol-fill{height:100%;width:70%;background:var(--cyan);border-radius:2px}

    .site-footer{background:radial-gradient(ellipse at center,var(--darker) 0%,#020205 100%);border-top:1px solid rgba(57,197,187,0.08);text-align:center;padding:40px;
      font-size:.68rem;color:var(--text-dim);letter-spacing:.08em;position:relative;z-index:1;padding-bottom:70px}

    @media(max-width:768px){
      body{cursor:auto}
      .scanlines{display:none!important}
      .site-header{padding:14px 20px}
      .logo{font-size:.85rem}
      .nav-links{display:none}
      .hero-content h1{font-size:2rem}
      .hero-content .hero-jp{font-size:.75rem}
      .hero-content p{font-size:.88rem}
      .tracks-section{padding:80px 16px 120px}
      .tracks-scatter{height:auto;display:flex;flex-direction:column;align-items:center;gap:24px}
      .disco-card{position:relative!important;left:auto!important;right:auto!important;top:auto!important;
        width:85%;max-width:280px;transform:none!important}
      .disco-card .play-icon{opacity:1;transform:translate(-50%,-50%) scale(.8)}
      .music-player{padding:10px 16px;gap:12px}
      .player-vol{display:none}
      .player-progress{flex:1}
      .player-btn,.disco-card{cursor:auto}
      .holo-panel{display:none}
      .boot-terminal{width:90vw;font-size:.45rem}
      .loader-title{font-size:2rem}
      .hud-corner{display:none}
      .loader-rings{width:200px;height:200px}
      .progress-ring-wrap{width:180px;height:180px}
      .vec-kanji-bg{font-size:5rem}
      .cyber-frame{display:none}
    }
  </style>
</head>
<body>

<div class="scanlines"></div>

<div class="start-screen" id="startScreen" onclick="beginSequence()">
  <div class="start-ring"></div>
  <div class="start-title">MIKU OS</div>
  <div class="start-prompt">Click to Initialize</div>
</div>
<button class="skip-btn" id="skipBtn" onclick="skipBoot()">SKIP</button>

<audio id="bootAudio" preload="auto" src="love-is-war.mp3"></audio>

<div class="loader" id="loader">
  <div class="loader-glitch-wrap">
  <div class="vec-kanji-bg" id="vecKanji">初音ミク</div>

  <!-- Cyber HUD frames -->
  <div class="cyber-frame static-slow" id="cf1">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Vocal Engine</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf1a">Frequency: 440 Hz</div>
      <div class="cf-line" id="cf1b">Resonance: 0.87</div>
      <div class="cf-line" id="cf1c">Output: NOMINAL</div>
    </div>
  </div>
  <div class="cyber-frame" id="cf2">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Neural Sync</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf2a">Latency: 2.4ms</div>
      <div class="cf-line" id="cf2b">Bandwidth: 12.8 Gbps</div>
      <div class="cf-line" id="cf2c">Link: STABLE</div>
    </div>
  </div>
  <div class="cyber-frame static" id="cf3">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Render Core</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf3a">Polygons: 847,291</div>
      <div class="cf-line" id="cf3b">Shaders: Compiled</div>
      <div class="cf-line" id="cf3c">FPS: 120.0</div>
    </div>
  </div>
  <div class="cyber-frame" id="cf4">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Audio Stream</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf4a">Sample: 44.1kHz</div>
      <div class="cf-line" id="cf4b">Bit depth: 24-bit</div>
      <div class="cf-line" id="cf4c">Buffer: READY</div>
    </div>
  </div>
  <div class="cyber-frame static-fast" id="cf5">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Character Data</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf5a">Model: CV01</div>
      <div class="cf-line" id="cf5b">Version: 4.2.1</div>
      <div class="cf-line" id="cf5c">Status: LOADED</div>
    </div>
  </div>
  <div class="cyber-frame" id="cf6">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Diva Protocol</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf6a">Encryption: AES-256</div>
      <div class="cf-line" id="cf6b">Handshake: Complete</div>
      <div class="cf-line" id="cf6c">Session: ACTIVE</div>
    </div>
  </div>
  <div class="cyber-frame static" id="cf7">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Waveform</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf7a">Peak: -3.2 dB</div>
      <div class="cf-line" id="cf7b">Clip: NONE</div>
    </div>
  </div>
  <div class="cyber-frame static-slow" id="cf8">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Memory Alloc</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf8a">Heap: 2.41 GB</div>
      <div class="cf-line" id="cf8b">Stack: 512 MB</div>
      <div class="cf-line" id="cf8c">GC: Idle</div>
    </div>
  </div>
  <div class="cyber-frame static-fast" id="cf9">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Signal I/O</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf9a">In: 48kHz/32bit</div>
      <div class="cf-line" id="cf9b">Out: Routed</div>
      <div class="cf-line" id="cf9c">Jitter: 0.02ms</div>
    </div>
  </div>
  <div class="cyber-frame static" id="cf10">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Temp</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf10a">Core: 42C</div>
      <div class="cf-line" id="cf10b">Safe</div>
    </div>
  </div>
  <div class="cyber-frame static-slow" id="cf11">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Motion Capture</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf11a">Tracking: 142 joints</div>
      <div class="cf-line" id="cf11b">Precision: 0.01mm</div>
      <div class="cf-line" id="cf11c">Calibrated: TRUE</div>
    </div>
  </div>
  <div class="cyber-frame static-fast" id="cf12">
    <div class="cf-tl"></div><div class="cf-tr"></div><div class="cf-bl"></div><div class="cf-br"></div>
    <div class="cf-header"><div class="cf-dot"></div><span>Texture Map</span></div>
    <div class="cf-body">
      <div class="cf-line" id="cf12a">UV: Unwrapped</div>
      <div class="cf-line" id="cf12b">Res: 4096x4096</div>
      <div class="cf-line" id="cf12c">Mip: Generated</div>
    </div>
  </div>

  <div class="loader-rings">
    <div class="load-ring"></div><div class="load-ring"></div><div class="load-ring"></div>
    <div class="load-ring"></div><div class="load-ring"></div>
  </div>
  <div class="scan-line"></div>
  <div class="glitch-image" id="glitchImage"></div>

  <svg class="progress-ring-wrap" viewBox="0 0 260 260">
    <circle class="progress-ring-bg" cx="130" cy="130" r="120"/>
    <circle class="progress-ring-fill" id="progressRing" cx="130" cy="130" r="120"/>
  </svg>

  <div class="loader-center">
    <div class="loader-init" id="loaderInit">Initializing System...</div>
    <div class="loader-title" id="loaderTitle">HATSUNE MIKU</div>
    <div class="loader-jp" id="loaderJp">初音ミク</div>
    <div class="loader-sub" id="loaderSub">Virtual Diva Protocol v3.9</div>
    <div class="audio-viz" id="audioViz">
      <div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div>
      <div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div>
      <div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div>
      <div class="viz-bar"></div>
    </div>
  </div>

  <!-- Holographic panels -->
  <div class="holo-panel" id="hpanel1">
    <div class="holo-label">Vocal Sync</div>
    <div class="holo-value" id="vocalSync">0.0%</div>
    <div class="holo-wave"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>
  </div>
  <div class="holo-panel" id="hpanel2">
    <div class="holo-label">Frequency Analysis</div>
    <div class="holo-value">440 Hz</div>
    <div class="holo-wave"><span></span><span></span><span></span><span></span><span></span><span></span></div>
  </div>
  <div class="holo-panel" id="hpanel3">
    <div class="holo-label">Neural Link</div>
    <div class="holo-value" id="neuralLink">Connecting...</div>
  </div>
  <div class="holo-panel" id="hpanel4">
    <div class="holo-label">Waveform Buffer</div>
    <div class="holo-value">16-bit / 44.1kHz</div>
    <div class="holo-wave"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>
  </div>
  <div class="holo-panel" id="hpanel5">
    <div class="holo-label">Character Model</div>
    <div class="holo-value">CV01 Miku</div>
  </div>

  <!-- Boot terminal -->
  <div class="boot-terminal" id="bootTerminal">
    <div class="boot-line" id="bl0">&gt; SYSTEM_CORE.............. <span class="ok">OK</span></div>
    <div class="boot-line" id="bl1">&gt; MEMORY_ALLOC [2048MB].... <span class="ok">OK</span></div>
    <div class="boot-line" id="bl2">&gt; VOCAL_ENGINE............. <span class="ok">OK</span></div>
    <div class="boot-line" id="bl3">&gt; AUDIO_DRIVER [44.1kHz]... <span class="ok">OK</span></div>
    <div class="boot-line" id="bl4">&gt; SYNC_MODULE.............. <span class="ok">OK</span></div>
    <div class="boot-line" id="bl5">&gt; NEURAL_NETWORK........... <span class="ok">OK</span></div>
    <div class="boot-line" id="bl6">&gt; RENDER_PIPELINE.......... <span class="ok">OK</span></div>
    <div class="boot-line" id="bl7">&gt; PHYSICS_ENGINE........... <span class="ok">OK</span></div>
    <div class="boot-line" id="bl8">&gt; CHARACTER_MODEL [CV01]... <span class="ok">LOADED</span></div>
    <div class="boot-line" id="bl9">&gt; DIVA_PROTOCOL v3.9...... <span class="ok">LINKED</span></div>
    <div class="boot-line" id="bl10">&gt; CALIBRATING VOCAL RANGE.. <span class="ok">READY</span></div>
    <div class="boot-line" id="bl11">&gt; LOADING ASSETS........... <span class="warn">45%</span></div>
    <div class="boot-line" id="bl12">&gt; LOADING ASSETS........... <span class="warn">65%</span></div>
    <div class="boot-line" id="bl13">&gt; LOADING ASSETS........... <span class="warn">75%</span></div>
    <div class="boot-line error" id="bl14">&gt; WARNING: BUFFER OVERFLOW DETECTED</div>
    <div class="boot-line error" id="bl15">&gt; CRITICAL ERROR: VOCAL_ENGINE FAULT</div>
    <div class="boot-line error" id="bl16">&gt; SYSTEM SHUTTING DOWN...</div>
  </div>

  <!-- Corner HUD -->
  <div class="hud-corner tl" id="hudTL">[SYS:039] MIKU_OS<br>BUILD 2025.03.09</div>
  <div class="hud-corner tr" id="hudTR">FREQ: 440Hz<br>[SYNC: ACTIVE]</div>
  <div class="hud-corner bl" id="hudBL">[MEM: 2048MB]<br>VOCALOID_v4.2</div>
  <div class="hud-corner br" id="hudBR">CV01<br>[STATUS: ONLINE]</div>
  </div><!-- end loader-glitch-wrap -->
</div>

<canvas class="spark-canvas" id="sparkCanvas"></canvas>
<div class="flash-overlay" id="flashOverlay"></div>

<canvas id="threeCanvas"></canvas>

<header class="site-header" id="siteHeader">
  <a class="logo glitch" data-text="MIKU" href="#">MIKU</a>
  <nav class="nav-links" id="mainNav">
    <a href="#tracks">Tracks</a>
  </nav>
</header>

<section class="hero" id="hero">
  <div class="hero-model">
    <iframe title="Koi wa Sensou - Hatsune Miku 3D Model" src="https://sketchfab.com/models/e348c72a1ad041808f55c8ba92178a86/embed?autostart=1&ui_theme=dark&ui_infos=0&ui_controls=1&ui_stop=0&ui_inspector=0&ui_watermark=0&ui_watermark_link=0&ui_ar=0&ui_help=0&ui_settings=0&ui_vr=0&ui_fullscreen=0&ui_annotations=0&transparent=1" allow="autoplay; fullscreen; xr-spatial-tracking"></iframe>
  </div>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <div class="hero-jp">初音ミク</div>
    <h1 class="glitch" data-text="HATSUNE MIKU">HATSUNE MIKU</h1>
    <p>The World's Virtual Diva</p>
  </div>
  <a class="hero-scroll" href="#tracks">Scroll to Begin</a>
</section>

<section class="tracks-section" id="tracks">
  <div class="tracks-title">
    <h2>SELECT TRACK</h2>
    <p>Click to play</p>
  </div>
  <div class="tracks-scatter">
    <div class="disco-card" data-video="9HrOqmiEsN8" data-mp4="romeo-and-cinderella.mp4" data-start="0" onclick="playSong(this)">
      <div class="card-img">
        <img src="https://i.pinimg.com/736x/2f/ff/ec/2fffec9e19cf027dd997da28bf080916.jpg" alt="Romeo and Cinderella" />
        <div class="static-overlay"></div>
        <div class="play-icon"></div>
      </div>
      <div class="card-label"><h3>Romeo and Cinderella</h3><div class="song-artist">doriko</div></div>
    </div>
    <div class="disco-card" data-video="EuJ6UR_pD5s" data-mp4="world-is-mine.mp4" data-start="0" onclick="playSong(this)">
      <div class="card-img">
        <img src="https://i.pinimg.com/1200x/4e/00/38/4e0038cf7d2a0ba2e675f1d6b91872ae.jpg" alt="World is Mine" />
        <div class="static-overlay"></div>
        <div class="play-icon"></div>
      </div>
      <div class="card-label"><h3>World is Mine</h3><div class="song-artist">ryo (supercell)</div></div>
    </div>
    <div class="disco-card" data-video="TNf3GPizM58" data-mp4="popipo.mp4" data-start="0" onclick="playSong(this)">
      <div class="card-img">
        <img src="https://i.pinimg.com/736x/5e/16/78/5e16781bc7b512ecc8ab2d8d89a5df9f.jpg" alt="Popipo" />
        <div class="static-overlay"></div>
        <div class="play-icon"></div>
      </div>
      <div class="card-label"><h3>Popipo</h3><div class="song-artist">Lamaze-P</div></div>
    </div>
    <div class="disco-card" data-video="5qkTpJAhywg" data-mp4="disappearance.mp4" data-start="4" onclick="playSong(this)">
      <div class="card-img">
        <img src="https://i.pinimg.com/736x/46/a9/eb/46a9ebcc26907d875c5c68267f7dafbb.jpg" alt="The Disappearance of Hatsune Miku" />
        <div class="static-overlay"></div>
        <div class="play-icon"></div>
      </div>
      <div class="card-label"><h3>The Disappearance</h3><div class="song-artist">cosMo@Bousou-P</div></div>
    </div>
    <div class="disco-card" data-video="OLzOrik5YJ8" data-mp4="blackrockshooter.mp4" data-start="4" onclick="playSong(this)">
      <div class="card-img">
        <img src="https://i.pinimg.com/736x/e3/87/8b/e3878b5101120ba0cbb186eeebfeb28c.jpg" alt="Black Rock Shooter" />
        <div class="static-overlay"></div>
        <div class="play-icon"></div>
      </div>
      <div class="card-label"><h3>Black Rock Shooter</h3><div class="song-artist">ryo (supercell)</div></div>
    </div>
  </div>
  <div id="ytPlayer" style="position:absolute;width:1px;height:1px;overflow:hidden;opacity:0;pointer-events:none"></div>
</section>
<video class="wim-video" id="wimVideo" loop playsinline></video>
<div class="wim-overlay" id="wimOverlay" onclick="toggleCinemaPlayback()"></div>
<button class="wim-back" id="wimBack" onclick="exitCinema()">BACK</button>

<footer class="site-footer">
  &copy; 2025 Fan Tribute &mdash; Hatsune Miku belongs to Crypton Future Media
</footer>

<div class="music-player" id="musicPlayer">
  <button class="player-btn" id="playBtn" onclick="togglePlay()">&#9654;</button>
  <div class="player-info">
    <div class="track-name" id="trackName">Select a track</div>
    <div class="track-artist">Hatsune Miku</div>
  </div>
  <div class="player-progress" id="progressBar" onclick="seekTrack(event)">
    <div class="player-progress-fill" id="progressFill"></div>
  </div>
  <div class="player-time" id="playerTime">0:00 / 0:00</div>
  <div class="player-vol">
    <span class="player-vol-icon">&#128265;</span>
    <div class="player-vol-bar"><div class="player-vol-fill"></div></div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
/* —— Three.js Particles —— */
(function(){
  var canvas=document.getElementById('threeCanvas');
  var renderer=new THREE.WebGLRenderer({canvas:canvas,alpha:true,antialias:true});
  renderer.setSize(window.innerWidth,window.innerHeight);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
  var scene=new THREE.Scene();
  var camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,1000);
  camera.position.z=50;
  var count=300;var geo=new THREE.BufferGeometry();
  var pos=new Float32Array(count*3);var vel=[];var sizes=new Float32Array(count);
  for(var i=0;i<count;i++){
    pos[i*3]=(Math.random()-0.5)*140;pos[i*3+1]=(Math.random()-0.5)*140;pos[i*3+2]=(Math.random()-0.5)*80;
    sizes[i]=0.2+Math.random()*0.6;
    vel.push({x:(Math.random()-0.5)*0.015,y:(Math.random()-0.5)*0.015,z:(Math.random()-0.5)*0.008});
  }
  geo.setAttribute('position',new THREE.BufferAttribute(pos,3));
  geo.setAttribute('size',new THREE.BufferAttribute(sizes,1));
  var vs='attribute float size;varying float vA;void main(){vec4 mv=modelViewMatrix*vec4(position,1.0);gl_PointSize=size*(200.0/-mv.z);gl_Position=projectionMatrix*mv;vA=clamp(1.0-(-mv.z/60.0),0.1,0.7);}';
  var fs='varying float vA;void main(){float d=length(gl_PointCoord-vec2(0.5));if(d>0.5)discard;float s=1.0-smoothstep(0.15,0.5,d);gl_FragColor=vec4(0.224,0.773,0.733,vA*s);}';
  var mat=new THREE.ShaderMaterial({vertexShader:vs,fragmentShader:fs,transparent:true,depthWrite:false});
  var pts=new THREE.Points(geo,mat);scene.add(pts);
  var mouse={x:0,y:0};
  window.addEventListener('mousemove',function(e){mouse.x=(e.clientX/window.innerWidth-0.5)*2;mouse.y=(e.clientY/window.innerHeight-0.5)*2;});
  window.addEventListener('resize',function(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);});
  function animate(){
    requestAnimationFrame(animate);var p=geo.attributes.position.array;
    for(var i=0;i<count;i++){var ix=i*3;
      p[ix]+=vel[i].x+Math.sin(Date.now()*0.0008+i)*0.008;
      p[ix+1]+=vel[i].y+Math.cos(Date.now()*0.0006+i)*0.005;p[ix+2]+=vel[i].z;
      if(p[ix]>70)p[ix]=-70;if(p[ix]<-70)p[ix]=70;
      if(p[ix+1]>70)p[ix+1]=-70;if(p[ix+1]<-70)p[ix+1]=70;
    }
    geo.attributes.position.needsUpdate=true;
    camera.position.x+=(mouse.x*3-camera.position.x)*0.02;
    camera.position.y+=(-mouse.y*2-camera.position.y)*0.02;
    camera.lookAt(0,0,0);pts.rotation.y+=0.0002;renderer.render(scene,camera);
  }
  animate();
})();

/* —— Scroll —— */
window.addEventListener('scroll',function(){
  document.getElementById('siteHeader').classList.toggle('scrolled',window.scrollY>80);
  var cards=document.querySelectorAll('.disco-card:not(.visible)');
  for(var i=0;i<cards.length;i++){
    if(cards[i].getBoundingClientRect().top<window.innerHeight-40)cards[i].classList.add('visible');
  }
},{passive:true});

/* —— YouTube Player —— */
var ytReady=false,ytPlayerObj=null,currentCard=null,progressInterval=null;
var tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';document.head.appendChild(tag);

function onYouTubeIframeAPIReady(){
  ytPlayerObj=new YT.Player('ytPlayer',{
    height:'1',width:'1',
    playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,modestbranding:1},
    events:{
      onReady:function(){ytReady=true;},
      onStateChange:function(e){
        if(e.data===YT.PlayerState.ENDED)stopSong();
        if(e.data===YT.PlayerState.PLAYING)startProgress();
        if(e.data===YT.PlayerState.PAUSED)clearInterval(progressInterval);
      }
    }
  });
}

var cinemaActive=false;

/* Fade out the boot audio (Love is War) when a track is selected */
function fadeOutBootAudio(){
  var ba=document.getElementById('bootAudio');
  if(!ba||ba.paused)return;
  var vol=ba.volume;
  var fade=setInterval(function(){
    vol-=0.05;
    if(vol<=0){clearInterval(fade);ba.pause();ba.volume=0;}
    else ba.volume=vol;
  },60);
}

function playSong(card){
  if(currentCard===card){
    toggleCinemaPlayback();
    return;
  }
  fadeOutBootAudio();
  if(cinemaActive)exitCinema();
  if(currentCard)currentCard.classList.remove('playing');
  currentCard=card;card.classList.add('playing');
  document.getElementById('trackName').textContent=card.querySelector('h3').textContent+' \u2014 '+card.querySelector('.song-artist').textContent;
  document.getElementById('playBtn').innerHTML='&#10074;&#10074;';
  document.getElementById('musicPlayer').classList.add('visible');
  enterCinema(card);
}

function enterCinema(card){
  cinemaActive=true;
  var vid=document.getElementById('wimVideo');
  var overlay=document.getElementById('wimOverlay');
  var backBtn=document.getElementById('wimBack');
  var section=document.querySelector('.tracks-section');
  /* Load the correct video */
  var mp4=card.dataset.mp4;
  var startTime=parseFloat(card.dataset.start)||0;
  if(vid.src!==mp4&&vid.getAttribute('src')!==mp4){
    vid.src=mp4;
  }
  /* Capture card's current screen position */
  var rect=card.getBoundingClientRect();
  card.classList.add('wim-active');
  /* Pin at current position first (no transition yet) */
  card.style.transition='none';
  card.style.top=rect.top+'px';
  card.style.left=rect.left+'px';
  card.style.width=rect.width+'px';
  card.style.right='auto';
  card.style.transform='rotate(0deg)';
  /* Force reflow then animate to corner */
  card.offsetHeight;
  card.style.transition='';
  card.style.top=(window.innerHeight-260)+'px';
  card.style.left=(window.innerWidth-200)+'px';
  card.style.width='180px';
  section.classList.add('cinema');
  vid.currentTime=startTime;
  vid.volume=parseFloat(document.querySelector('.player-vol-fill').style.width||'70')/100||0.7;
  vid.play();
  vid.classList.add('active');
  overlay.classList.add('active');
  backBtn.classList.add('active');
  startProgress();
}

function toggleCinemaPlayback(){
  if(!cinemaActive)return;
  var vid=document.getElementById('wimVideo');
  if(vid.paused){
    vid.play();
    if(currentCard)currentCard.classList.add('playing');
    document.getElementById('playBtn').innerHTML='&#10074;&#10074;';
  } else {
    vid.pause();
    if(currentCard)currentCard.classList.remove('playing');
    document.getElementById('playBtn').innerHTML='&#9654;';
  }
}
window.toggleCinemaPlayback=toggleCinemaPlayback;

function exitCinema(){
  if(!cinemaActive)return;
  cinemaActive=false;
  var vid=document.getElementById('wimVideo');
  var overlay=document.getElementById('wimOverlay');
  var backBtn=document.getElementById('wimBack');
  var section=document.querySelector('.tracks-section');
  vid.pause();
  vid.classList.remove('active');
  overlay.classList.remove('active');
  backBtn.classList.remove('active');
  section.classList.remove('cinema');
  /* Deselect the card */
  if(currentCard){currentCard.classList.remove('playing');currentCard=null;}
  var activeCard=document.querySelector('.disco-card.wim-active');
  if(activeCard){
    activeCard.style.transition='none';
    activeCard.classList.remove('wim-active');
    activeCard.style.top='';activeCard.style.left='';activeCard.style.width='';
    activeCard.style.right='';activeCard.style.transform='';
    activeCard.offsetHeight;
    activeCard.style.transition='';
  }
  /* Reset player bar */
  clearInterval(progressInterval);
  document.getElementById('playBtn').innerHTML='&#9654;';
  document.getElementById('progressFill').style.width='0%';
  document.getElementById('playerTime').textContent='0:00 / 0:00';
  document.getElementById('trackName').textContent='Select a track';
  /* Resume Love is War where it left off */
  var ba=document.getElementById('bootAudio');
  if(ba&&ba.currentTime>0){
    ba.volume=0;
    ba.play();
    var fadeIn=setInterval(function(){
      if(ba.volume<0.65){ba.volume=Math.min(0.7,ba.volume+0.05);}
      else{clearInterval(fadeIn);ba.volume=0.7;}
    },60);
  }
}
window.exitCinema=exitCinema;

function fmtTime(s){var m=Math.floor(s/60),ss=Math.floor(s%60);return m+':'+(ss<10?'0':'')+ss;}

function startProgress(){
  clearInterval(progressInterval);
  progressInterval=setInterval(function(){
    var vid=document.getElementById('wimVideo');
    if(vid.paused)return;
    var c=vid.currentTime,d=vid.duration;
    if(!d||d<=0)return;
    document.getElementById('progressFill').style.width=(c/d)*100+'%';
    document.getElementById('playerTime').textContent=fmtTime(c)+' / '+fmtTime(d);
  },500);
}

function stopSong(){
  if(cinemaActive)exitCinema();
  clearInterval(progressInterval);if(currentCard)currentCard.classList.remove('playing');currentCard=null;
  document.getElementById('playBtn').innerHTML='&#9654;';
  document.getElementById('progressFill').style.width='0%';
  document.getElementById('playerTime').textContent='0:00 / 0:00';
  document.getElementById('trackName').textContent='Select a track';
}

window.togglePlay=function(){
  toggleCinemaPlayback();
};

window.seekTrack=function(e){
  var bar=document.getElementById('progressBar'),rect=bar.getBoundingClientRect();
  var pct=(e.clientX-rect.left)/rect.width;
  var vid=document.getElementById('wimVideo');
  if(vid.duration>0)vid.currentTime=pct*vid.duration;
};

/* Volume bar click handler */
(function(){
  var volBar=document.querySelector('.player-vol-bar');
  var volFill=document.querySelector('.player-vol-fill');
  if(volBar){
    volBar.addEventListener('click',function(e){
      var rect=volBar.getBoundingClientRect();
      var pct=Math.max(0,Math.min(1,(e.clientX-rect.left)/rect.width));
      volFill.style.width=(pct*100)+'%';
      document.getElementById('wimVideo').volume=pct;
    });
  }
})();

/* —— Boot Sequence Controller —— */
function skipBoot(){
  var loader=document.getElementById('loader');
  var flash=document.getElementById('flashOverlay');
  var sparkCanvas=document.getElementById('sparkCanvas');
  var skipBtn=document.getElementById('skipBtn');
  var audio=document.getElementById('bootAudio');
  /* Hide skip button */
  skipBtn.classList.remove('show');
  /* Jump audio to just before the AHHH */
  if(audio&&!audio.paused){
    audio.currentTime=21.8;
    audio.volume=0.7;
    audio.playbackRate=1;
  }
  /* Kill the loader */
  loader.classList.add('hidden');
  loader.style.display='none';
  /* Big white flash synced with the scream */
  flash.style.background='#fff';
  flash.classList.add('bang');
  setTimeout(function(){
    flash.classList.remove('bang');
    flash.classList.add('fade');
    var hero=document.getElementById('hero');
    if(hero)hero.classList.add('shake');
    setTimeout(function(){hero.classList.remove('shake');},600);
    setTimeout(function(){
      var jp=document.querySelector('.hero-jp');if(jp)jp.classList.add('reveal');
    },800);
    setTimeout(function(){
      var h1=document.querySelector('.hero-content h1');if(h1)h1.classList.add('reveal');
    },1200);
    setTimeout(function(){
      var p=document.querySelector('.hero-content p');if(p)p.classList.add('reveal');
    },1800);
    setTimeout(function(){
      var sc=document.querySelector('.hero-scroll');if(sc)sc.style.opacity='1';
    },2400);
  },1000);
  setTimeout(function(){flash.remove();},4000);
  if(sparkCanvas)sparkCanvas.remove();
}
window.skipBoot=skipBoot;

var bootStarted=false;
function beginSequence(){
  if(bootStarted)return;
  bootStarted=true;
  var startScreen=document.getElementById('startScreen');
  var audio=document.getElementById('bootAudio');
  var loader=document.getElementById('loader');
  var ring=document.getElementById('progressRing');
  var flash=document.getElementById('flashOverlay');
  var sparkCanvas=document.getElementById('sparkCanvas');
  var ctx=sparkCanvas.getContext('2d');
  sparkCanvas.width=window.innerWidth;
  sparkCanvas.height=window.innerHeight;
  var gi=document.getElementById('glitchImage');

  /* Hide start screen, show skip button, play music */
  startScreen.classList.add('hidden');
  setTimeout(function(){startScreen.style.display='none';},600);
  var skipBtn=document.getElementById('skipBtn');
  setTimeout(function(){skipBtn.classList.add('show');},1500);
  audio.volume=0.7;
  audio.play();

  function show(id){var el=document.getElementById(id);if(el)el.classList.add('show');}
  function setProgress(pct){
    var circ=754;
    ring.style.strokeDashoffset=circ-(circ*pct/100);
  }

  /*
   * Extended boot sequence synced to Love is War intro
   * The AHHH scream hits at ~22s — flash synced to that exact moment
   *
   * Phase 1: Calm initialization (0–9s) — soft guitar intro
   * Phase 2: Systems coming online (9–15s) — building energy
   * Phase 3: Full power (15–17s) — everything alive, drums building
   * Phase 4: Glitch/failure (17–19s) — things go wrong
   * Phase 5: Blackout (19–21.5s) — darkness, tension
   * Phase 6: AHHH! Explosive reveal (22s) — BAM!
   */

  /* === Phase 1: Calm initialization (0–9s) === */
  /* Kanji background fades in early */
  setTimeout(function(){show('vecKanji');},500);

  /* Cyber frames pop up sporadically with typed text */
  setTimeout(function(){show('cf1');setTimeout(function(){show('cf1a');},300);
    setTimeout(function(){show('cf1b');},600);setTimeout(function(){show('cf1c');},900);},4500);
  setTimeout(function(){show('cf2');setTimeout(function(){show('cf2a');},250);
    setTimeout(function(){show('cf2b');},550);setTimeout(function(){show('cf2c');},850);},6200);
  setTimeout(function(){show('cf3');setTimeout(function(){show('cf3a');},200);
    setTimeout(function(){show('cf3b');},500);setTimeout(function(){show('cf3c');},800);},8000);
  setTimeout(function(){show('cf4');setTimeout(function(){show('cf4a');},350);
    setTimeout(function(){show('cf4b');},650);setTimeout(function(){show('cf4c');},950);},9500);
  setTimeout(function(){show('cf5');setTimeout(function(){show('cf5a');},300);
    setTimeout(function(){show('cf5b');},600);setTimeout(function(){show('cf5c');},900);},11500);
  setTimeout(function(){show('cf6');setTimeout(function(){show('cf6a');},250);
    setTimeout(function(){show('cf6b');},550);setTimeout(function(){show('cf6c');},850);},13000);

  /* New frames — staggered, varied timing */
  setTimeout(function(){show('cf7');setTimeout(function(){show('cf7a');},200);
    setTimeout(function(){show('cf7b');},450);},5300);
  setTimeout(function(){show('cf8');setTimeout(function(){show('cf8a');},300);
    setTimeout(function(){show('cf8b');},600);setTimeout(function(){show('cf8c');},900);},7200);
  setTimeout(function(){show('cf9');setTimeout(function(){show('cf9a');},250);
    setTimeout(function(){show('cf9b');},500);setTimeout(function(){show('cf9c');},750);},10200);
  setTimeout(function(){show('cf10');setTimeout(function(){show('cf10a');},200);
    setTimeout(function(){show('cf10b');},400);},12200);
  setTimeout(function(){show('cf11');setTimeout(function(){show('cf11a');},300);
    setTimeout(function(){show('cf11b');},600);setTimeout(function(){show('cf11c');},900);},14500);
  setTimeout(function(){show('cf12');setTimeout(function(){show('cf12a');},250);
    setTimeout(function(){show('cf12b');},500);setTimeout(function(){show('cf12c');},750);},15800);

  setTimeout(function(){show('loaderInit');},500);

  setTimeout(function(){
    var t=document.getElementById('loaderTitle');t.classList.add('show');
    t.style.animation='glitchIn 1s forwards';
  },1800);

  setTimeout(function(){show('loaderJp');},2800);
  setTimeout(function(){show('loaderSub');},3500);

  /* Boot terminal begins — slow, methodical */
  setTimeout(function(){show('bootTerminal');show('bl0');setProgress(5);},4200);
  setTimeout(function(){show('bl1');setProgress(8);},5000);
  setTimeout(function(){show('bl2');setProgress(12);},5800);
  setTimeout(function(){show('bl3');setProgress(16);},6500);

  /* First holo panel */
  setTimeout(function(){
    show('hpanel1');
    document.getElementById('vocalSync').textContent='8.2%';
    setProgress(20);
  },7200);

  setTimeout(function(){show('bl4');setProgress(24);},7800);
  setTimeout(function(){show('bl5');setProgress(28);},8500);

  /* === Phase 2: Systems coming online (9–15s) — energy building === */
  setTimeout(function(){
    show('bl6');show('hpanel2');setProgress(32);
    document.getElementById('vocalSync').textContent='24.1%';
  },9200);

  setTimeout(function(){show('bl7');setProgress(36);},9800);

  setTimeout(function(){
    show('bl8');show('hpanel3');setProgress(40);
    document.getElementById('neuralLink').textContent='Syncing...';
  },10500);

  setTimeout(function(){
    show('hpanel4');show('bl9');setProgress(46);
    document.getElementById('neuralLink').textContent='Established';
    document.getElementById('vocalSync').textContent='51.6%';
  },11200);

  setTimeout(function(){
    show('bl10');show('hpanel5');setProgress(52);
    document.getElementById('vocalSync').textContent='67.4%';
  },12000);

  /* Audio viz + HUD come alive */
  setTimeout(function(){
    show('audioViz');show('hudTL');show('hudTR');setProgress(58);
  },12800);

  setTimeout(function(){
    show('hudBL');show('hudBR');
    document.getElementById('vocalSync').textContent='82.7%';
    setProgress(62);
  },13500);

  /* === Phase 3: Full power — everything humming (15–17s) === */
  setTimeout(function(){
    show('bl11');setProgress(66);
    document.getElementById('vocalSync').textContent='91.3%';
  },14200);
  setTimeout(function(){show('bl12');setProgress(70);},15000);
  setTimeout(function(){
    show('bl13');setProgress(75);
    document.getElementById('vocalSync').textContent='94.8%';
  },15800);

  /* Brief moment of everything looking perfect... */
  setTimeout(function(){setProgress(78);
    document.getElementById('vocalSync').textContent='97.2%';
  },16500);

  /* === Phase 4: Glitch/failure (17–19s) — it all goes wrong === */
  /* Audio glitch — violent distortion, stutters, speed warps, skips */
  var audioChopTimeout;
  var chopBaseTime;
  function audioChopTick(baseVol){
    var r=Math.random();
    /* Volume chaos */
    if(r<0.3){audio.volume=0;}
    else if(r<0.45){audio.volume=baseVol*0.1;}
    else if(r<0.6){audio.volume=baseVol*(0.2+Math.random()*0.3);}
    else{audio.volume=baseVol*(0.7+Math.random()*0.3);}
    /* Playback rate warping — sounds broken */
    var rr=Math.random();
    if(rr<0.2){audio.playbackRate=0.4+Math.random()*0.3;}
    else if(rr<0.35){audio.playbackRate=1.5+Math.random()*0.8;}
    else if(rr<0.5){audio.playbackRate=0.1;}
    else{audio.playbackRate=1;}
    /* Random micro-seeks — audio skips/repeats */
    if(Math.random()<0.25){
      var jump=(Math.random()-0.5)*1.5;
      audio.currentTime=Math.max(0,audio.currentTime+jump);
    }
    /* Timing — mostly rapid-fire, occasional freeze */
    var next=15+Math.random()*50;
    if(Math.random()<0.12)next=180+Math.random()*150;
    audioChopTimeout=setTimeout(function(){audioChopTick(baseVol);},next);
  }
  function startAudioChop(){
    chopBaseTime=audio.currentTime;
    audioChopTick(audio.volume);
  }
  function stopAudioChop(){
    clearTimeout(audioChopTimeout);
    audio.volume=0;
    audio.playbackRate=1;
  }

  /* Kanji glitch — flicker between 初音ミク and CALNE CA */
  var kanji=document.getElementById('vecKanji');
  var kanjiFlicker;
  function startKanjiGlitch(){
    kanji.classList.add('calne');
    var toggle=true;
    kanjiFlicker=setInterval(function(){
      kanji.textContent=toggle?'CALNE CA':'初音ミク';
      toggle=!toggle;
    },150);
  }
  function stopKanjiGlitch(){
    clearInterval(kanjiFlicker);
    kanji.textContent='初音ミク';
    kanji.classList.remove('calne');
  }

  /* First Calne Ca flash */
  setTimeout(function(){
    gi.className='glitch-image flash1';
    kanji.textContent='CALNE CA';kanji.classList.add('calne');
    setTimeout(function(){gi.className='glitch-image';kanji.textContent='初音ミク';kanji.classList.remove('calne');},250);
  },17000);

  setTimeout(function(){
    show('bl14');
    loader.classList.add('glitching');
    ring.classList.add('error');
    startKanjiGlitch();
    startAudioChop();
    var panels=document.querySelectorAll('.holo-panel,.cyber-frame');
    for(var i=0;i<panels.length;i++)panels[i].classList.add('shake');
  },17300);

  /* Second Calne Ca flash */
  setTimeout(function(){
    gi.className='glitch-image flash2';
    setTimeout(function(){gi.className='glitch-image';},300);
  },17800);

  setTimeout(function(){show('bl15');},18000);

  /* Third Calne Ca flash — unmistakable */
  setTimeout(function(){
    gi.className='glitch-image flash3';
    setTimeout(function(){gi.className='glitch-image';},500);
  },18300);

  /* Sparks + panel shatter */
  setTimeout(function(){
    show('bl16');
    launchSparks(ctx,sparkCanvas.width,sparkCanvas.height);
    var panels=document.querySelectorAll('.holo-panel,.cyber-frame');
    for(var i=0;i<panels.length;i++){
      (function(p,d){setTimeout(function(){p.classList.add('shatter');},d);})(panels[i],i*60);
    }
  },18700);

  /* === Phase 5: Blackout (19–21.5s) — tension building === */
  setTimeout(function(){
    loader.classList.remove('glitching');
    loader.classList.add('blackout');
    stopKanjiGlitch();
    stopAudioChop();
    ctx.clearRect(0,0,sparkCanvas.width,sparkCanvas.height);
  },19300);

  /* Eerie cyan flickers — building anticipation */
  setTimeout(function(){
    flash.style.background='rgba(57,197,187,0.05)';flash.classList.add('bang');
    setTimeout(function(){flash.classList.remove('bang');},80);
  },20000);
  setTimeout(function(){
    flash.style.background='rgba(57,197,187,0.08)';flash.classList.add('bang');
    setTimeout(function(){flash.classList.remove('bang');},60);
  },20500);
  setTimeout(function(){
    flash.style.background='rgba(57,197,187,0.12)';flash.classList.add('bang');
    setTimeout(function(){flash.classList.remove('bang');},50);
  },20900);
  setTimeout(function(){
    flash.style.background='rgba(57,197,187,0.18)';flash.classList.add('bang');
    setTimeout(function(){flash.classList.remove('bang');},40);
  },21200);
  setTimeout(function(){
    flash.style.background='rgba(57,197,187,0.25)';flash.classList.add('bang');
    setTimeout(function(){flash.classList.remove('bang');},35);
  },21500);

  /* === Phase 6: AHHH! Explosive reveal at 22s === */
  setTimeout(function(){
    audio.volume=0.7;
    flash.style.background='#fff';
    flash.classList.add('bang');
    loader.classList.add('hidden');
    loader.style.display='none';
    skipBtn.classList.remove('show');
  },22200);

  /* Hold pure white, then slow fade reveals Miku underneath */
  setTimeout(function(){
    flash.classList.remove('bang');
    flash.classList.add('fade');
    var hero=document.getElementById('hero');
    if(hero)hero.classList.add('shake');
    setTimeout(function(){hero.classList.remove('shake');},600);
    /* Reveal hero elements as the white fades */
    setTimeout(function(){
      var jp=document.querySelector('.hero-jp');if(jp)jp.classList.add('reveal');
    },800);
    setTimeout(function(){
      var h1=document.querySelector('.hero-content h1');if(h1)h1.classList.add('reveal');
    },1200);
    setTimeout(function(){
      var p=document.querySelector('.hero-content p');if(p)p.classList.add('reveal');
    },1800);
    setTimeout(function(){
      var sc=document.querySelector('.hero-scroll');if(sc)sc.style.opacity='1';
    },2400);
  },23200);

  setTimeout(function(){
    flash.remove();
    sparkCanvas.remove();
  },27200);

  /* Spark particle system */
  function launchSparks(c,w,h){
    var sparks=[];
    var cx2=w/2,cy2=h/2;
    for(var i=0;i<100;i++){
      var angle=Math.random()*Math.PI*2;
      var speed=3+Math.random()*10;
      sparks.push({
        x:cx2+(Math.random()-0.5)*60,
        y:cy2+(Math.random()-0.5)*60,
        vx:Math.cos(angle)*speed,
        vy:Math.sin(angle)*speed-2,
        life:0.6+Math.random()*0.6,
        size:1+Math.random()*2.5,
        color:Math.random()>0.3?'rgba(255,200,80,':'rgba(255,255,255,'
      });
    }
    function frame(){
      c.clearRect(0,0,w,h);
      var alive=false;
      for(var i=0;i<sparks.length;i++){
        var s=sparks[i];
        if(s.life<=0)continue;
        alive=true;
        s.x+=s.vx;s.y+=s.vy;
        s.vy+=0.15;
        s.vx*=0.99;
        s.life-=0.015;
        c.globalAlpha=Math.max(0,s.life);
        c.fillStyle=s.color+Math.max(0,s.life)+')';
        c.beginPath();c.arc(s.x,s.y,s.size,0,Math.PI*2);c.fill();
        c.fillStyle=s.color+(Math.max(0,s.life)*0.3)+')';
        c.beginPath();c.arc(s.x-s.vx*0.5,s.y-s.vy*0.5,s.size*0.6,0,Math.PI*2);c.fill();
      }
      c.globalAlpha=1;
      if(alive)requestAnimationFrame(frame);
    }
    frame();
  }
}
</script>
</body>
</html>
